@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

/* Safe Area Support for iOS/Android */
:root {
  --safe-area-top: env(safe-area-inset-top, 0px);
  --safe-area-bottom: env(safe-area-inset-bottom, 0px);
  --safe-area-left: env(safe-area-inset-left, 0px);
  --safe-area-right: env(safe-area-inset-right, 0px);

  /* Dynamic safe area (updated by SafeAreaProvider) */
  --header-height: calc(56px + var(--safe-area-top));
  --bottom-nav-height: calc(64px + var(--safe-area-bottom));
  --content-padding-top: calc(var(--safe-area-top) + 16px);
  --content-padding-bottom: calc(80px + var(--safe-area-bottom));
  --keyboard-height: 0px;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-jakarta);
  --font-heading: var(--font-sora);
  --font-mono: var(--font-mono);
  --color-sidebar-ring: var(--sidebar-ring);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar: var(--sidebar);
  --color-chart-5: var(--chart-5);
  --color-chart-4: var(--chart-4);
  --color-chart-3: var(--chart-3);
  --color-chart-2: var(--chart-2);
  --color-chart-1: var(--chart-1);
  --color-ring: var(--ring);
  --color-input: var(--input);
  --color-border: var(--border);
  --color-destructive: var(--destructive);
  --color-accent-foreground: var(--accent-foreground);
  --color-accent: var(--accent);
  --color-muted-foreground: var(--muted-foreground);
  --color-muted: var(--muted);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-secondary: var(--secondary);
  --color-primary-foreground: var(--primary-foreground);
  --color-primary: var(--primary);
  --color-popover-foreground: var(--popover-foreground);
  --color-popover: var(--popover);
  --color-card-foreground: var(--card-foreground);
  --color-card: var(--card);
  --color-success: var(--success);
  --color-success-foreground: var(--success-foreground);
  --color-warning: var(--warning);
  --color-warning-foreground: var(--warning-foreground);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --radius-2xl: calc(var(--radius) + 8px);
  --radius-3xl: calc(var(--radius) + 16px);
}

:root {
  --radius: 0.75rem;

  /* Light Mode - Fresh & Energetic Sports Theme */
  --background: oklch(0.985 0.005 270);
  --foreground: oklch(0.145 0.03 270);

  --card: oklch(1 0 0);
  --card-foreground: oklch(0.145 0.03 270);

  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.145 0.03 270);

  /* Primary - Electric Violet */
  --primary: oklch(0.52 0.26 285);
  --primary-foreground: oklch(0.99 0.005 285);

  /* Secondary - Soft Lavender */
  --secondary: oklch(0.945 0.04 280);
  --secondary-foreground: oklch(0.45 0.2 285);

  --muted: oklch(0.965 0.015 270);
  --muted-foreground: oklch(0.52 0.03 270);

  --accent: oklch(0.93 0.06 285);
  --accent-foreground: oklch(0.45 0.2 285);

  /* Success - Emerald Energy */
  --success: oklch(0.65 0.2 155);
  --success-foreground: oklch(0.99 0.01 155);

  /* Warning - Amber Pulse */
  --warning: oklch(0.78 0.18 75);
  --warning-foreground: oklch(0.25 0.05 75);

  /* Destructive - Coral Fire */
  --destructive: oklch(0.58 0.22 25);

  --border: oklch(0.915 0.015 270);
  --input: oklch(0.915 0.015 270);
  --ring: oklch(0.52 0.26 285);

  /* Charts - Vibrant Athletic Spectrum */
  --chart-1: oklch(0.58 0.24 285);
  --chart-2: oklch(0.72 0.2 45);
  --chart-3: oklch(0.68 0.22 165);
  --chart-4: oklch(0.7 0.18 210);
  --chart-5: oklch(0.62 0.22 340);

  /* Sidebar - Clean & Professional */
  --sidebar: oklch(0.99 0.005 270);
  --sidebar-foreground: oklch(0.145 0.03 270);
  --sidebar-primary: oklch(0.52 0.26 285);
  --sidebar-primary-foreground: oklch(0.99 0.005 285);
  --sidebar-accent: oklch(0.945 0.04 280);
  --sidebar-accent-foreground: oklch(0.45 0.2 285);
  --sidebar-border: oklch(0.92 0.015 270);
  --sidebar-ring: oklch(0.52 0.26 285);

  /* Premium Effects */
  --gradient-primary: linear-gradient(135deg, oklch(0.55 0.28 285), oklch(0.5 0.25 270));
  --gradient-accent: linear-gradient(135deg, oklch(0.65 0.2 285), oklch(0.6 0.18 320));
  --gradient-success: linear-gradient(135deg, oklch(0.65 0.2 155), oklch(0.6 0.18 175));
  --shadow-glow: 0 0 40px -10px oklch(0.55 0.25 285 / 0.3);
}

.dark {
  /* Dark Mode - Midnight Athletic */
  --background: oklch(0.12 0.035 280);
  --foreground: oklch(0.97 0.01 280);

  --card: oklch(0.16 0.04 280);
  --card-foreground: oklch(0.97 0.01 280);

  --popover: oklch(0.16 0.04 280);
  --popover-foreground: oklch(0.97 0.01 280);

  /* Primary - Luminous Violet */
  --primary: oklch(0.68 0.24 285);
  --primary-foreground: oklch(0.12 0.03 285);

  --secondary: oklch(0.22 0.055 280);
  --secondary-foreground: oklch(0.95 0.01 280);

  --muted: oklch(0.2 0.04 280);
  --muted-foreground: oklch(0.68 0.04 280);

  --accent: oklch(0.24 0.06 280);
  --accent-foreground: oklch(0.95 0.01 280);

  --success: oklch(0.68 0.2 155);
  --success-foreground: oklch(0.12 0.03 155);

  --warning: oklch(0.8 0.18 75);
  --warning-foreground: oklch(0.15 0.04 75);

  --destructive: oklch(0.55 0.22 25);

  --border: oklch(0.26 0.04 280);
  --input: oklch(0.26 0.04 280);
  --ring: oklch(0.65 0.22 285);

  --chart-1: oklch(0.72 0.22 285);
  --chart-2: oklch(0.78 0.18 45);
  --chart-3: oklch(0.72 0.2 165);
  --chart-4: oklch(0.78 0.16 210);
  --chart-5: oklch(0.68 0.2 340);

  --sidebar: oklch(0.14 0.04 280);
  --sidebar-foreground: oklch(0.97 0.01 280);
  --sidebar-primary: oklch(0.68 0.24 285);
  --sidebar-primary-foreground: oklch(0.12 0.03 285);
  --sidebar-accent: oklch(0.22 0.055 280);
  --sidebar-accent-foreground: oklch(0.95 0.01 280);
  --sidebar-border: oklch(0.26 0.04 280);
  --sidebar-ring: oklch(0.65 0.22 285);

  --gradient-primary: linear-gradient(135deg, oklch(0.62 0.26 285), oklch(0.55 0.24 270));
  --gradient-accent: linear-gradient(135deg, oklch(0.68 0.22 285), oklch(0.62 0.2 320));
  --gradient-success: linear-gradient(135deg, oklch(0.68 0.2 155), oklch(0.62 0.18 175));
  --shadow-glow: 0 0 50px -15px oklch(0.65 0.24 285 / 0.4);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
    /* Prevent text from overflowing by default */
    min-width: 0;
  }

  html {
    overscroll-behavior: none;
    height: 100%;
    scroll-behavior: smooth;
    /* Background color fills safe areas (notch, home indicator) */
    background: var(--background);
  }

  /* ========================================
     GLOBAL TEXT OVERFLOW PREVENTION
     Ensures text never overlaps or breaks layouts
     ======================================== */

  /* All text content should handle overflow gracefully */
  p, span, h1, h2, h3, h4, h5, h6, a, label {
    max-width: 100%;
    overflow-wrap: break-word;
    word-wrap: break-word;
  }

  /* Prevent flex children from overflowing */
  .flex > *,
  [class*="flex-"] > * {
    min-width: 0;
  }

  /* Prevent grid children from overflowing */
  .grid > *,
  [class*="grid-"] > * {
    min-width: 0;
    max-width: 100%;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-family: var(--font-jakarta), system-ui, sans-serif;
    font-feature-settings: "rlig" 1, "calt" 1, "ss01" 1;
    min-height: 100dvh;
    min-height: -webkit-fill-available;
    overscroll-behavior: none;
    -webkit-overflow-scrolling: touch;
    -webkit-tap-highlight-color: transparent;
    line-height: 1.6;
    letter-spacing: -0.01em;
  }

  /* Heading Typography with Sora */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  .heading {
    font-family: var(--font-sora), var(--font-jakarta), system-ui, sans-serif;
    font-weight: 700;
    letter-spacing: -0.025em;
    line-height: 1.2;
  }

  h1 {
    @apply text-3xl sm:text-4xl md:text-5xl;
  }

  h2 {
    @apply text-2xl sm:text-3xl md:text-4xl;
  }

  h3 {
    @apply text-xl sm:text-2xl;
  }

  h4 {
    @apply text-lg sm:text-xl;
  }

  /* Numbers and stats with mono font */
  .stat-number,
  .mono {
    font-family: var(--font-mono), ui-monospace, monospace;
    font-variant-numeric: tabular-nums;
    letter-spacing: -0.02em;
  }

  /* Smooth scrolling for all scrollable areas */
  .overflow-auto,
  .overflow-y-auto,
  .overflow-x-auto {
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
  }

  /* Hide scrollbar on mobile for cleaner look */
  @media (max-width: 768px) {

    .hide-scrollbar::-webkit-scrollbar,
    .overflow-auto::-webkit-scrollbar {
      display: none;
    }

    .hide-scrollbar,
    .overflow-auto {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
  }

  /* Custom scrollbar for desktop */
  @media (min-width: 769px) {
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: transparent;
    }

    ::-webkit-scrollbar-thumb {
      background: oklch(0.7 0.02 270 / 0.3);
      border-radius: 100px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: oklch(0.6 0.03 270 / 0.5);
    }
  }

  /* Prevent pull-to-refresh on mobile */
  body.no-pull-refresh {
    overscroll-behavior-y: contain;
  }

  /* Input optimizations for mobile - prevent zoom */
  input,
  textarea,
  select {
    font-size: 16px !important;
  }

  @media (min-width: 768px) {

    input,
    textarea,
    select {
      font-size: 14px !important;
    }
  }

  /* Touch-friendly tap targets */
  button,
  a,
  [role="button"] {
    touch-action: manipulation;
  }

  /* Keyboard visible - adjust for iOS keyboard */
  body.keyboard-visible {
    --keyboard-offset: 300px;
  }

  /* Smooth transitions for focus states */
  input,
  textarea,
  select,
  button {
    transition: all 0.2s ease-out;
  }

  /* Better focus indication */
  :focus-visible {
    outline: none;
  }

  /* Form labels */
  label {
    @apply text-sm font-medium text-foreground/90 mb-1.5 block;
  }

  /* Error messages */
  .form-error {
    @apply text-destructive text-xs mt-1.5 flex items-center gap-1;
  }

  /* Success messages */
  .form-success {
    @apply text-success text-xs mt-1.5 flex items-center gap-1;
  }
}

/* Premium Utility Classes */
@layer utilities {

  /* Glass effect */
  .glass {
    background: oklch(1 0 0 / 0.7);
    backdrop-filter: blur(16px) saturate(180%);
    -webkit-backdrop-filter: blur(16px) saturate(180%);
  }

  .dark .glass {
    background: oklch(0.16 0.04 280 / 0.7);
  }

  /* Gradient text */
  .gradient-text {
    background: linear-gradient(135deg, oklch(0.55 0.28 285), oklch(0.5 0.22 320));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  /* Glow effects */
  .glow-primary {
    box-shadow: 0 0 30px -8px oklch(0.55 0.25 285 / 0.4);
  }

  .dark .glow-primary {
    box-shadow: 0 0 40px -10px oklch(0.65 0.24 285 / 0.5);
  }

  /* Subtle hover lift */
  .hover-lift {
    transition: transform 0.2s ease-out, box-shadow 0.2s ease-out;
  }

  .hover-lift:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 30px -12px oklch(0 0 0 / 0.2);
  }

  .hover-lift:active {
    transform: translateY(0);
  }

  /* Card hover effects */
  .card-interactive {
    @apply transition-all duration-300 ease-out;
  }

  .card-interactive:hover {
    @apply shadow-xl -translate-y-1;
    box-shadow: 0 20px 40px -15px oklch(0.55 0.15 285 / 0.15);
  }

  /* Mobile-optimized touch area */
  .touch-target {
    @apply min-h-[44px] min-w-[44px];
  }

  /* Safe area padding utilities */
  .pt-safe {
    padding-top: env(safe-area-inset-top, 0px);
  }

  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom, 0px);
  }

  .pl-safe {
    padding-left: env(safe-area-inset-left, 0px);
  }

  .pr-safe {
    padding-right: env(safe-area-inset-right, 0px);
  }

  .px-safe {
    padding-left: env(safe-area-inset-left, 0px);
    padding-right: env(safe-area-inset-right, 0px);
  }

  .py-safe {
    padding-top: env(safe-area-inset-top, 0px);
    padding-bottom: env(safe-area-inset-bottom, 0px);
  }

  .p-safe {
    padding-top: var(--safe-area-top);
    padding-bottom: var(--safe-area-bottom);
    padding-left: var(--safe-area-left);
    padding-right: var(--safe-area-right);
  }

  /* Margin safe area utilities */
  .mt-safe {
    margin-top: var(--safe-area-top);
  }

  .mb-safe {
    margin-bottom: var(--safe-area-bottom);
  }

  .ml-safe {
    margin-left: var(--safe-area-left);
  }

  .mr-safe {
    margin-right: var(--safe-area-right);
  }

  .mx-safe {
    margin-left: var(--safe-area-left);
    margin-right: var(--safe-area-right);
  }

  .my-safe {
    margin-top: var(--safe-area-top);
    margin-bottom: var(--safe-area-bottom);
  }

  /* Min-height utilities accounting for safe areas */
  .min-h-screen-safe {
    min-height: calc(100dvh - var(--safe-area-top) - var(--safe-area-bottom));
  }

  .h-screen-safe {
    height: calc(100dvh - var(--safe-area-top) - var(--safe-area-bottom));
  }

  /* Content area with bottom nav spacing */
  .pb-nav-safe {
    padding-bottom: var(--content-padding-bottom);
  }

  /* Header height with safe area */
  .h-header-safe {
    height: var(--header-height);
  }

  .top-header-safe {
    top: var(--header-height);
  }

  /* Keyboard-aware padding */
  .pb-keyboard {
    padding-bottom: var(--keyboard-height);
  }

  /* Safe area inset utilities using CSS max() for fallbacks */
  .pt-safe-or-4 {
    padding-top: max(var(--safe-area-top), 1rem);
  }

  .pb-safe-or-4 {
    padding-bottom: max(var(--safe-area-bottom), 1rem);
  }

  /* Fixed position utilities with safe areas */
  .fixed-top-safe {
    position: fixed;
    top: var(--safe-area-top);
    left: var(--safe-area-left);
    right: var(--safe-area-right);
  }

  .fixed-bottom-safe {
    position: fixed;
    bottom: var(--safe-area-bottom);
    left: var(--safe-area-left);
    right: var(--safe-area-right);
  }

  .fixed-full-safe {
    position: fixed;
    top: var(--safe-area-top);
    bottom: var(--safe-area-bottom);
    left: var(--safe-area-left);
    right: var(--safe-area-right);
  }

  /* Inset utilities for absolute positioning */
  .inset-safe {
    top: var(--safe-area-top);
    bottom: var(--safe-area-bottom);
    left: var(--safe-area-left);
    right: var(--safe-area-right);
  }

  .inset-x-safe {
    left: var(--safe-area-left);
    right: var(--safe-area-right);
  }

  .inset-y-safe {
    top: var(--safe-area-top);
    bottom: var(--safe-area-bottom);
  }

  /* Staggered animation delays */
  .animate-delay-100 {
    animation-delay: 100ms;
  }

  .animate-delay-200 {
    animation-delay: 200ms;
  }

  .animate-delay-300 {
    animation-delay: 300ms;
  }

  .animate-delay-400 {
    animation-delay: 400ms;
  }

  .animate-delay-500 {
    animation-delay: 500ms;
  }

  /* Fade in up animation */
  @keyframes fade-in-up {
    from {
      opacity: 0;
      transform: translateY(16px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in-up {
    animation: fade-in-up 0.5s ease-out forwards;
  }

  /* Scale in animation */
  @keyframes scale-in {
    from {
      opacity: 0;
      transform: scale(0.95);
    }

    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  .animate-scale-in {
    animation: scale-in 0.3s ease-out forwards;
  }

  /* Pulse glow animation */
  @keyframes pulse-glow {

    0%,
    100% {
      box-shadow: 0 0 20px -8px oklch(0.55 0.25 285 / 0.4);
    }

    50% {
      box-shadow: 0 0 30px -5px oklch(0.55 0.25 285 / 0.6);
    }
  }

  .animate-pulse-glow {
    animation: pulse-glow 2s ease-in-out infinite;
  }

  /* Shimmer loading effect */
  @keyframes shimmer {
    0% {
      background-position: -200% 0;
    }

    100% {
      background-position: 200% 0;
    }
  }

  .shimmer {
    background: linear-gradient(90deg,
        oklch(0.9 0.01 270 / 0) 0%,
        oklch(0.9 0.01 270 / 0.5) 50%,
        oklch(0.9 0.01 270 / 0) 100%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
  }

  /* Gradient border */
  .gradient-border {
    position: relative;
  }

  .gradient-border::before {
    content: "";
    position: absolute;
    inset: 0;
    padding: 1px;
    border-radius: inherit;
    background: linear-gradient(135deg, oklch(0.55 0.25 285), oklch(0.5 0.2 320));
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    pointer-events: none;
  }

  /* Bottom mobile navigation spacing */
  .pb-mobile-nav {
    padding-bottom: calc(5rem + var(--safe-area-bottom, env(safe-area-inset-bottom, 0px)));
  }

  /* Status badge styles */
  .badge-success {
    @apply bg-success/15 text-success border-success/20;
  }

  .badge-warning {
    @apply bg-warning/15 text-warning border-warning/20;
  }

  .badge-destructive {
    @apply bg-destructive/15 text-destructive border-destructive/20;
  }

  /* ========================================
     TEXT OVERFLOW & TRUNCATION UTILITIES
     Prevent text from overlapping or breaking layouts
     ======================================== */

  /* Single line truncation with ellipsis */
  .text-truncate {
    @apply truncate;
    max-width: 100%;
  }

  /* Multi-line truncation (line clamp) */
  .line-clamp-1 {
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Word break for long words/URLs */
  .break-word {
    word-wrap: break-word;
    word-break: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
  }

  /* Prevent text selection on UI elements */
  .no-select {
    @apply select-none;
    -webkit-user-select: none;
    user-select: none;
  }

  /* Ensure flex items don't overflow */
  .flex-overflow-fix {
    min-width: 0;
    max-width: 100%;
  }

  /* Grid items overflow protection */
  .grid-overflow-fix {
    min-width: 0;
    max-width: 100%;
    overflow: hidden;
  }
}

/* Mobile Bottom Navigation Bar Styles */
@layer components {
  .mobile-nav {
    @apply fixed bottom-0 left-0 right-0 z-50 md:hidden;
    @apply bg-card/95 backdrop-blur-xl border-t border-border/50;
    @apply flex items-center justify-around;
    padding-bottom: var(--safe-area-bottom, env(safe-area-inset-bottom, 0px));
    padding-left: var(--safe-area-left, env(safe-area-inset-left, 0px));
    padding-right: var(--safe-area-right, env(safe-area-inset-right, 0px));
  }

  .mobile-nav-item {
    @apply flex flex-col items-center justify-center;
    @apply py-2 px-4 min-h-[56px] min-w-[64px];
    @apply text-muted-foreground transition-colors duration-200;
    @apply touch-manipulation select-none;
  }

  .mobile-nav-item.active {
    @apply text-primary;
  }

  .mobile-nav-item:active {
    @apply scale-95;
  }

  .mobile-nav-icon {
    @apply h-6 w-6 mb-1 transition-transform duration-200;
  }

  .mobile-nav-item.active .mobile-nav-icon {
    @apply scale-110;
  }

  .mobile-nav-label {
    @apply text-[10px] font-medium leading-none;
  }

  /* Premium Card Styles */
  .premium-card {
    @apply relative overflow-hidden rounded-2xl bg-card border border-border/50;
    @apply shadow-sm transition-all duration-300;
  }

  .premium-card::before {
    @apply absolute inset-0 opacity-0 transition-opacity duration-300 pointer-events-none;
    background: linear-gradient(135deg, oklch(0.55 0.15 285 / 0.05), transparent);
  }

  .premium-card:hover::before {
    @apply opacity-100;
  }

  .premium-card:hover {
    @apply shadow-lg -translate-y-0.5;
    border-color: oklch(0.55 0.15 285 / 0.2);
  }

  /* Hero gradient background */
  .hero-gradient {
    background: linear-gradient(135deg,
        oklch(0.52 0.26 285) 0%,
        oklch(0.48 0.24 295) 50%,
        oklch(0.45 0.22 270) 100%);
  }

  /* Stat card highlight */
  .stat-highlight {
    @apply relative;
  }

  .stat-highlight::after {
    content: "";
    @apply absolute -bottom-1 left-0 w-8 h-0.5 rounded-full;
    background: linear-gradient(90deg, var(--primary), transparent);
  }

  /* Form field group */
  .form-group {
    @apply space-y-2;
  }

  /* Form row - for side by side fields */
  .form-row {
    @apply grid gap-3;
  }

  @media (min-width: 640px) {
    .form-row {
      @apply grid-cols-2;
    }
  }

  /* Enhanced input wrapper with icon support */
  .input-with-icon {
    @apply relative;
  }

  .input-with-icon input,
  .input-with-icon textarea {
    @apply pl-11;
  }

  .input-with-icon .input-icon {
    @apply absolute left-3.5 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground pointer-events-none;
  }

  /* Loading state for buttons */
  .btn-loading {
    @apply relative text-transparent;
  }

  .btn-loading::after {
    content: "";
    @apply absolute inset-0 m-auto h-5 w-5 border-2 border-current border-t-transparent rounded-full animate-spin;
  }

  /* Touch-optimized select */
  select {
    @apply appearance-none bg-no-repeat cursor-pointer;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E");
    background-position: right 12px center;
    background-size: 16px;
    padding-right: 40px !important;
  }

  /* Smooth sheet/modal transitions */
  [data-slot="sheet-content"],
  [role="dialog"] {
    @apply will-change-transform;
  }

  /* Bottom sheet handle indicator */
  .sheet-handle {
    @apply w-10 h-1 bg-muted-foreground/30 rounded-full mx-auto mb-4;
  }

  /* Card press effect for mobile */
  @media (max-width: 768px) {
    .card-pressable {
      @apply active:scale-[0.98] transition-transform duration-150;
    }
  }

  /* Floating action button styles */
  .fab {
    @apply fixed z-40 shadow-2xl;
    bottom: calc(5rem + var(--safe-area-bottom, env(safe-area-inset-bottom, 0px)) + 1rem);
    right: calc(1rem + var(--safe-area-right, env(safe-area-inset-right, 0px)));
  }
}

/* ========================================
   ANDROID SPECIFIC STYLES
   Support for notches, navigation bar, and Android-specific UI
   ======================================== */

/* Android platform detection */
.platform-android {
  /* Android navigation bar padding */
  --android-nav-height: 48px;
  --android-status-height: 24px;
}

/* Android devices with notch/cutout */
.platform-android.has-notch {
  --android-status-height: 32px;
}

/* Android safe area fallbacks (when env() not supported) */
@supports not (padding-bottom: env(safe-area-inset-bottom)) {
  .platform-android {
    /* Fallback padding for older Android WebViews */
    --safe-area-inset-top: var(--android-status-height, 24px);
    --safe-area-inset-bottom: var(--android-nav-height, 48px);
    --safe-area-inset-left: 0px;
    --safe-area-inset-right: 0px;
  }

  .platform-android .pt-safe {
    padding-top: var(--safe-area-inset-top);
  }

  .platform-android .pb-safe {
    padding-bottom: var(--safe-area-inset-bottom);
  }

  .platform-android .mobile-nav {
    padding-bottom: var(--android-nav-height);
  }

  .platform-android header {
    padding-top: calc(0.75rem + var(--android-status-height));
  }
}

/* Android keyboard visible adjustments */
.platform-android.keyboard-visible {
  /* Reduce bottom padding when keyboard is shown */
  --keyboard-height: 0px;
}

.platform-android.keyboard-visible .mobile-nav {
  display: none;
}

.platform-android.keyboard-visible [data-slot="sheet-footer"] {
  padding-bottom: 1rem;
}

/* Android specific touch targets (larger) */
.platform-android button,
.platform-android a,
.platform-android [role="button"] {
  min-height: 48px;
  min-width: 48px;
}

.platform-android input,
.platform-android textarea,
.platform-android select {
  min-height: 48px;
}

/* Android ripple effect simulation */
.platform-android .ripple {
  position: relative;
  overflow: hidden;
}

.platform-android .ripple::after {
  content: "";
  position: absolute;
  inset: 0;
  background: radial-gradient(circle, rgba(0,0,0,0.1) 10%, transparent 10%);
  background-position: center;
  background-repeat: no-repeat;
  background-size: 1000% 1000%;
  opacity: 0;
  transition: background-size 0.5s, opacity 0.5s;
}

.platform-android .ripple:active::after {
  background-size: 0% 0%;
  opacity: 1;
  transition: 0s;
}

/* Android landscape mode */
.platform-android.landscape {
  --android-nav-height: 0px;
}

.platform-android.landscape .mobile-nav {
  /* Hide bottom nav in landscape */
  display: none;
}

.platform-android.landscape main {
  padding-bottom: 1rem;
}

/* Android Sheet/Modal adjustments */
.platform-android [data-slot="sheet-content"] {
  /* Ensure proper safe area on Android */
  padding-bottom: max(env(safe-area-inset-bottom, 0px), var(--android-nav-height, 48px));
}

.platform-android [data-slot="sheet-footer"] {
  padding-bottom: calc(1rem + max(env(safe-area-inset-bottom, 0px), var(--android-nav-height, 48px)));
}

/* Android specific scrolling */
.platform-android .overflow-y-auto {
  -webkit-overflow-scrolling: auto;
  overscroll-behavior: contain;
}

/* Android status bar area tap prevention */
.platform-android header {
  touch-action: none;
}

/* ========================================
   iOS SPECIFIC STYLES (already mostly handled by env())
   ======================================== */

.platform-ios {
  /* iOS uses env() values automatically */
}

/* iOS home indicator area */
.platform-ios .mobile-nav {
  padding-bottom: var(--safe-area-bottom, env(safe-area-inset-bottom, 34px));
}

/* iOS notch handling for landscape */
.platform-ios.landscape {
  padding-left: var(--safe-area-left, env(safe-area-inset-left, 44px));
  padding-right: var(--safe-area-right, env(safe-area-inset-right, 44px));
}

/* ========================================
   KEYBOARD VISIBLE - BOTH PLATFORMS
   ======================================== */

body.keyboard-visible {
  /* Adjust for keyboard */
  --keyboard-offset: var(--keyboard-height, 300px);
}

body.keyboard-visible .mobile-nav {
  transform: translateY(100%);
  pointer-events: none;
}

body.keyboard-visible main {
  padding-bottom: 1rem;
}

/* Keep input visible when keyboard is open */
body.keyboard-visible input:focus,
body.keyboard-visible textarea:focus {
  scroll-margin-bottom: calc(var(--keyboard-height, 300px) + 20px);
}